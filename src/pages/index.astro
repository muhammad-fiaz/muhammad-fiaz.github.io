---
import BaseLayout from "@/layouts/BaseLayout.astro";
import { Hero } from "@/components/home/Hero";
import { About } from "@/components/home/About";
import { BentoGrid } from "@/components/home/BentoGrid";
import { Projects } from "@/components/home/Projects";
import { FAQ } from "@/components/home/FAQ";
import { siteConfig } from "@/site.config";
import { AdUnit } from "@/components/ui/AdUnit";
import { AmpAdUnit } from "@/components/ui/AmpAdUnit";
import { getImage } from "astro:assets";

const title = "Home";
const description = siteConfig.seo.defaultDescription;

const optimizedAvatar = await getImage({
  src: siteConfig.author.avatar,
  width: 180,
  height: 180,
  format: "webp",
});
---

<BaseLayout title={title} description={description} image={siteConfig.ogImage}>
  <!-- Background Pattern -->
  <div class="fixed inset-0 -z-50 pointer-events-none">
    <div
      class="absolute inset-0 bg-[linear-gradient(to_right,#8080800a_1px,transparent_1px),linear-gradient(to_bottom,#8080800a_1px,transparent_1px)] bg-size-[14px_24px]"
    >
    </div>
    <div
      class="absolute top-0 left-0 right-0 h-125 bg-linear-to-b from-primary/5 to-transparent"
    >
    </div>
  </div>

  <!-- Main Content -->
  <div class="w-full overflow-x-hidden">
    <Hero client:load avatarSrc={optimizedAvatar.src} />

    <About client:visible />

    <!-- AdSense Ad (Standard - Desktop/Tablet) -->
    <div
      class="hidden sm:block container mx-auto px-4 sm:px-6 lg:px-8 py-8 max-w-6xl overflow-hidden"
    >
      <AdUnit
        client:visible
        slot={siteConfig.adsense.slots.display.main}
        format="auto"
        fullWidthResponsive={true}
      />
    </div>

    <!-- AMP Ad (Mobile Only) -->
    <div class="sm:hidden mx-4 my-4">
      <AmpAdUnit
        client:visible
        slot={siteConfig.adsense.slots.multiplex.main}
        height={250}
      />
    </div>

    <BentoGrid client:visible />

    <!-- AdSense Ad (Standard - Second Instance) -->
    <div
      class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 max-w-6xl overflow-hidden"
    >
      <AdUnit
        client:visible
        slot={siteConfig.adsense.slots.display.ad5}
        format="auto"
        fullWidthResponsive={true}
      />
    </div>

    <section
      id="projects"
      class="min-h-screen flex flex-col justify-center py-16 sm:py-20 lg:py-24 relative"
    >
      <div
        class="container max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 rounded-xl overflow-hidden"
      >
        <div class="text-center mb-12 sm:mb-16 space-y-4">
          <h2 class="text-2xl sm:text-3xl md:text-5xl font-bold tracking-tight">
            Recent Projects
          </h2>
          <p
            class="text-base sm:text-lg text-muted-foreground max-w-2xl mx-auto px-4"
          >
            A collection of projects driven by performance, developer
            experience, and long-term maintainability.
          </p>
        </div>
        <Projects client:visible />
      </div>
    </section>

    <!-- AdSense Ad Above FAQ (Desktop/Tablet) -->
    <div
      class="hidden sm:block container mx-auto px-4 sm:px-6 lg:px-8 py-8 max-w-6xl overflow-hidden"
    >
      <AdUnit
        client:visible
        slot={siteConfig.adsense.slots.display.ad6}
        format="auto"
        fullWidthResponsive={true}
      />
    </div>

    <!-- AMP Ad Above FAQ (Mobile Only) -->
    <div class="sm:hidden mx-4 my-4">
      <AmpAdUnit
        client:visible
        slot={siteConfig.adsense.slots.multiplex.ad4}
        height={250}
      />
    </div>

    <FAQ client:load />
  </div>
</BaseLayout>
