---
import { siteConfig } from "@/site.config";

interface Props {
  slot: string;
  format?:
    | "auto"
    | "fluid"
    | "autorelaxed"
    | "vertical"
    | "rectangle"
    | "horizontal";
  layoutKey?: string;
  layout?: string;
  class?: string;
  style?: string;
  fullWidthResponsive?: boolean;
}

const {
  slot,
  format = "auto",
  layoutKey,
  layout,
  class: className,
  style = "display: block; max-width: 100%;",
  fullWidthResponsive,
} = Astro.props;
---

{
  siteConfig.adsense.enabled && (
    <div
      class={`w-full max-w-full flex justify-center items-center relative bg-secondary/50 rounded-xl overflow-hidden transition-colors duration-200 ${className || ""}`}
    >
      {/* Placeholder text */}
      <span class="absolute inset-0 flex items-center justify-center text-muted-foreground/50 text-sm font-medium pointer-events-none ad-placeholder py-8">
        Advertisement
      </span>
      <ins
        class="adsbygoogle relative z-10 w-full"
        style={style}
        data-ad-client={siteConfig.adsense.clientId}
        data-ad-slot={slot}
        data-ad-format={format}
        data-ad-layout-key={layoutKey}
        data-ad-layout={layout}
        data-full-width-responsive={fullWidthResponsive}
      />
      <script is:inline>
        (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
    </div>
  )
}

<style>
  /* Hide placeholder when ad loads */
  .adsbygoogle[data-ad-status="filled"] ~ .ad-placeholder,
  .adsbygoogle:not(:empty) ~ .ad-placeholder {
    display: none;
  }
</style>
